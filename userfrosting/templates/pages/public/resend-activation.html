<!DOCTYPE html>
<html lang="en">
  {% include 'pages/public/components/head.html' %}
  <body>
    <div class="container">
      {% include 'pages/public/components/main-nav.html' %}
      <div class="jumbotron">
        <h1>Account Activation</h1>
        <p class="lead">Please enter your username and the email address you used to sign up, and an activation email will be resent.</p> 
		<form class='form-horizontal' role='form' name='resend' action='api/user_resend_activation.php' method='post'>
		  <div class="row">
			<div id='display-alerts' class="col-lg-12">
  
			</div>
		  </div>
		  <div class="form-group">
			<div class="col-md-offset-3 col-md-6">
			  <input type="text" class="form-control" placeholder="Username" name = 'user_name' value=''>
			</div>
		  </div>
		  <div class="form-group">
			<div class="col-md-offset-3 col-md-6">
			  <input type="email" class="form-control" placeholder="Email" name='email'>
			</div>
		  </div>
		  <div class="form-group">
			<div class="col-md-12">
			  <button type="submit" class="btn btn-success submit" value='Resend'>Resend Activation</button>
			</div>
		  </div>
		</form>
      </div>	
      {% include 'pages/public/components/footer.html' %}	

    </div> <!-- /container -->

    <script>
    $(document).ready(function() {          
        alertWidget('display-alerts');
        // Process form     
        $("form[name='resend']").formValidation({
          framework: 'bootstrap',
          // Feedback icons
          icon: {
              valid: 'fa fa-check',
              invalid: 'fa fa-times',
              validating: 'fa fa-refresh'
          },
          fields: {{validators | raw}}
        });
        $("form[name='resend']").submit(function(e){
            var form = $(this);
            var url = APIPATH + 'user_resend_activation.php';
            // Serialize and post to the backend script in ajax mode
            var serializedData = form.serialize();
            serializedData += '&ajaxMode=true';     
            $.ajax({  
              type: "POST",  
              url: url,  
              data: serializedData
            }).done(function(result) {
                var resultJSON = processJSONResult(result);
                if (resultJSON['errors'] && resultJSON['errors'] > 0){
                  alertWidget('display-alerts');
                }
            });
        });
    });
    </script>
  </body>
</html>